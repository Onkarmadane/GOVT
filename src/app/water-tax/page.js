'use client';

import { useState } from 'react';
import Link from 'next/link';

export default function WaterTax() {
  const [activeTab, setActiveTab] = useState('payment');
  const [connectionNumber, setConnectionNumber] = useState('');
  const [searchResult, setSearchResult] = useState(null);

  const [newConnectionData, setNewConnectionData] = useState({
    applicantName: '',
    applicantNameMarathi: '',
    fatherName: '',
    contactNumber: '',
    email: '',
    aadharNumber: '',
    propertyNumber: '',
    plotNumber: '',
    address: '',
    pincode: '',
    connectionType: '',
    waterUsage: '',
    propertyType: '',
    noOfMembers: '',
    existingConnection: 'no'
  });

  const sampleBills = [
    {
      connectionNo: 'WC001234',
      billNumber: 'WB2024001',
      billDate: '2024-01-15',
      dueDate: '2024-02-14',
      previousReading: 1250,
      currentReading: 1380,
      consumption: 130,
      amount: 850,
      status: 'Pending',
      penalty: 0
    },
    {
      connectionNo: 'WC001234',
      billNumber: 'WB2023012',
      billDate: '2023-12-15',
      billDate: '2024-01-14',
      previousReading: 1120,
      currentReading: 1250,
      consumption: 130,
      amount: 850,
      status: 'Paid',
      penalty: 0
    }
  ];

  const handleSearch = async () => {
    if (!connectionNumber.trim()) {
      alert('рдХреГрдкрдпрд╛ рдХрдиреЗрдХреНрд╢рди рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВред');
      return;
    }

    try {
      const response = await fetch(`/api/water-tax?connectionId=${connectionNumber}`);
      const result = await response.json();

      if (result.success && result.data) {
        const connection = result.data;
        setSearchResult({
          connectionNumber: connection.connectionId,
          consumerName: connection.ownerName,
          address: connection.propertyAddress,
          connectionType: connection.connectionType,
          status: connection.status,
          currentDue: connection.currentBill?.totalAmount || 0,
          lastPayment: connection.paymentHistory?.[0]?.paymentDate || 'N/A',
          meterNumber: connection.meterNumber || 'N/A'
        });
      } else {
        // Fallback to sample data for demo
        if (connectionNumber === 'WC001234') {
          setSearchResult({
            connectionNumber: 'WC001234',
            consumerName: 'рд░рд╛рдо рдХреБрдорд╛рд░ рд╢рд░реНрдорд╛',
            address: 'рдкреНрд▓реЙрдЯ рдирдВ. 123, рд╡рд╛рд░реНрдб рдирдВ. 5, рдЧреНрд░рд╛рдо рдкрдВрдЪрд╛рдпрдд рд╕реИрдВрдкрд▓',
            connectionType: 'Domestic',
            status: 'Active',
            currentDue: 850,
            lastPayment: '2023-11-15',
            meterNumber: 'WM789012'
          });
        } else {
          setSearchResult(null);
          alert('рдХрдиреЗрдХреНрд╢рди рдирдВрдмрд░ рдирд╣реАрдВ рдорд┐рд▓рд╛ред рдХреГрдкрдпрд╛ рд╕рд╣реА рдирдВрдмрд░ рдбрд╛рд▓реЗрдВред');
        }
      }
    } catch (error) {
      console.error('Search error:', error);
      // Fallback to sample data
      if (connectionNumber === 'WC001234') {
        setSearchResult({
          connectionNumber: 'WC001234',
          consumerName: 'рд░рд╛рдо рдХреБрдорд╛рд░ рд╢рд░реНрдорд╛',
          address: 'рдкреНрд▓реЙрдЯ рдирдВ. 123, рд╡рд╛рд░реНрдб рдирдВ. 5, рдЧреНрд░рд╛рдо рдкрдВрдЪрд╛рдпрдд рд╕реИрдВрдкрд▓',
          connectionType: 'Domestic',
          status: 'Active',
          currentDue: 850,
          lastPayment: '2023-11-15',
          meterNumber: 'WM789012'
        });
      } else {
        alert('рдХрдиреЗрдХреНрд╢рди рдЦреЛрдЬрдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╣реБрдИред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред');
      }
    }
  };

  const handleNewConnectionSubmit = async (e) => {
    e.preventDefault();
    
    try {
      const submitData = {
        action: 'new_connection',
        ownerName: newConnectionData.applicantName,
        ownerNameMarathi: newConnectionData.applicantNameMarathi,
        fatherName: newConnectionData.fatherName,
        mobileNumber: newConnectionData.contactNumber,
        email: newConnectionData.email,
        aadharNumber: newConnectionData.aadharNumber,
        propertyAddress: newConnectionData.address,
        propertyType: newConnectionData.propertyType,
        plotNumber: newConnectionData.plotNumber,
        connectionType: newConnectionData.connectionType,
        applicationDate: new Date()
      };
      
      const response = await fetch('/api/water-tax', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(submitData)
      });
      
      const result = await response.json();
      
      if (result.success) {
        alert(`рдирдпрд╛ рдХрдиреЗрдХреНрд╢рди рдЖрд╡реЗрджрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛! рдЖрдкрдХрд╛ рдЖрд╡реЗрджрди рд╕рдВрдЦреНрдпрд╛: ${result.connectionId}`);
        // Reset form
        setNewConnectionData({
          applicantName: '',
          applicantNameMarathi: '',
          fatherName: '',
          contactNumber: '',
          email: '',
          aadharNumber: '',
          propertyNumber: '',
          plotNumber: '',
          address: '',
          pincode: '',
          connectionType: '',
          waterUsage: '',
          propertyType: '',
          noOfMembers: '',
          existingConnection: 'no'
        });
      } else {
        alert(`рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ${result.message}`);
      }
    } catch (error) {
      console.error('Submission error:', error);
      alert('рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╣реБрдИред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред');
    }
  };

  const handlePayment = (billAmount) => {
    alert(`тВ╣${billAmount} рдХрд╛ рднреБрдЧрддрд╛рди рдкреЗрдореЗрдВрдЯ рдЧреЗрдЯрд╡реЗ рдкрд░ рднреЗрдЬрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...`);
  };

  return (
    <div className="container mx-auto px-4 py-8">
      {/* Header */}
      <div className="bg-white rounded-lg shadow-sm p-6 mb-8 border border-gray-100">
        <Link href="/" className="text-primary-600 hover:text-primary-700 flex items-center mb-4">
          тЖР рд╡рд╛рдкрд╕ рд╣реЛрдо рдкрд░ рдЬрд╛рдПрдВ
        </Link>
        <h1 className="text-3xl font-bold text-gray-800 mb-2">рдЬрд▓ рдХрд░ рд╡рд┐рднрд╛рдЧ</h1>
        <p className="text-gray-600">Water Tax Department - Maharashtra Gram Panchayat</p>
      </div>

      {/* Navigation Tabs */}
      <div className="bg-white rounded-lg shadow-sm border border-gray-100 mb-8">
        <div className="flex flex-wrap border-b border-gray-200">
          <button
            onClick={() => setActiveTab('payment')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'payment'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯТз рдмрд┐рд▓ рднреБрдЧрддрд╛рди | Bill Payment
          </button>
          <button
            onClick={() => setActiveTab('newConnection')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'newConnection'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯФМ рдирдпрд╛ рдХрдиреЗрдХреНрд╢рди | New Connection
          </button>
          <button
            onClick={() => setActiveTab('viewBills')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'viewBills'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯУК рдмрд┐рд▓ рджреЗрдЦреЗрдВ | View Bills
          </button>
          <button
            onClick={() => setActiveTab('rates')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'rates'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯТ░ рджрд░реЗрдВ | Water Rates
          </button>
        </div>

        <div className="p-6">
          {/* Bill Payment Tab */}
          {activeTab === 'payment' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рдЬрд▓ рдХрд░ рднреБрдЧрддрд╛рди | Water Tax Payment</h2>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      рдХрдиреЗрдХреНрд╢рди рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ *
                    </label>
                    <div className="flex gap-2">
                      <input
                        type="text"
                        value={connectionNumber}
                        onChange={(e) => setConnectionNumber(e.target.value)}
                        placeholder="WC001234"
                        className="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                      <button
                        onClick={handleSearch}
                        className="btn-primary"
                      >
                        рдЦреЛрдЬреЗрдВ
                      </button>
                    </div>
                    <p className="text-xs text-gray-500 mt-1">
                      рдбреЗрдореЛ рдХреЗ рд▓рд┐рдП: WC001234 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
                    </p>
                  </div>

                  {searchResult && (
                    <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                      <h3 className="font-bold text-green-800 mb-3">рдХрдиреЗрдХреНрд╢рди рд╡рд┐рд╡рд░рдг</h3>
                      <div className="space-y-2 text-sm">
                        <p><span className="font-medium">рдирд╛рдо:</span> {searchResult.consumerName}</p>
                        <p><span className="font-medium">рдкрддрд╛:</span> {searchResult.address}</p>
                        <p><span className="font-medium">рдХрдиреЗрдХреНрд╢рди рдкреНрд░рдХрд╛рд░:</span> {searchResult.connectionType}</p>
                        <p><span className="font-medium">рдореАрдЯрд░ рдирдВрдмрд░:</span> {searchResult.meterNumber}</p>
                        <p><span className="font-medium">рд╕реНрдерд┐рддрд┐:</span> 
                          <span className="text-green-600 font-medium"> {searchResult.status}</span>
                        </p>
                      </div>
                    </div>
                  )}
                </div>

                {searchResult && (
                  <div className="bg-red-50 border border-red-200 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-red-800 mb-4">рдмрдХрд╛рдпрд╛ рд░рд╛рд╢рд┐ | Outstanding Amount</h3>
                    <div className="text-center">
                      <div className="text-3xl font-bold text-red-600 mb-2">тВ╣{searchResult.currentDue}</div>
                      <p className="text-sm text-red-700 mb-4">рдХреБрд▓ рдмрдХрд╛рдпрд╛ рд░рд╛рд╢рд┐</p>
                      <button
                        onClick={() => handlePayment(searchResult.currentDue)}
                        className="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200"
                      >
                        рдЕрднреА рднреБрдЧрддрд╛рди рдХрд░реЗрдВ | Pay Now
                      </button>
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* New Connection Tab */}
          {activeTab === 'newConnection' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рдирдпрд╛ рдЬрд▓ рдХрдиреЗрдХреНрд╢рди рдЖрд╡реЗрджрди | New Water Connection Application</h2>
              
              <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <h3 className="font-bold text-yellow-800 mb-2">рдЖрд╡рд╢реНрдпрдХ рджрд╕реНрддрд╛рд╡реЗрдЬ | Required Documents</h3>
                <ul className="text-sm text-yellow-700 space-y-1">
                  <li>тАв рдЖрдзрд╛рд░ рдХрд╛рд░реНрдб рдХреА рдкреНрд░рддрд┐</li>
                  <li>тАв рд╕рдВрдкрддреНрддрд┐ рдХрд╛рдЧрдЬрд╛рдд (7/12 рдЙрддрд╛рд░рд╛, рд╕рдВрдкрддреНрддрд┐ рдХрд╛рд░реНрдб)</li>
                  <li>тАв рдкрд╛рд╕рдкреЛрд░реНрдЯ рд╕рд╛рдЗрдЬ рдлреЛрдЯреЛ</li>
                  <li>тАв рдЖрд╡реЗрджрди рд╢реБрд▓реНрдХ: тВ╣500 (рдШрд░реЗрд▓реВ), тВ╣1000 (рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ)</li>
                </ul>
              </div>

              <form onSubmit={handleNewConnectionSubmit} className="space-y-6">
                <div className="bg-white border border-gray-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЬрд╛рдирдХрд╛рд░реА | Personal Information</h3>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЖрд╡реЗрджрдХ рдХрд╛ рдирд╛рдо (рдЕрдВрдЧреНрд░реЗрдЬреА рдореЗрдВ) *
                      </label>
                      <input
                        type="text"
                        name="applicantName"
                        value={newConnectionData.applicantName}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЖрд╡реЗрджрдХ рдХрд╛ рдирд╛рдо (рдорд░рд╛рдареА рдореЗрдВ)
                      </label>
                      <input
                        type="text"
                        name="applicantNameMarathi"
                        value={newConnectionData.applicantNameMarathi}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдкрд┐рддрд╛/рдкрддрд┐ рдХрд╛ рдирд╛рдо *
                      </label>
                      <input
                        type="text"
                        name="fatherName"
                        value={newConnectionData.fatherName}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ *
                      </label>
                      <input
                        type="tel"
                        name="contactNumber"
                        value={newConnectionData.contactNumber}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        pattern="[0-9]{10}"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЖрдзрд╛рд░ рдирдВрдмрд░ *
                      </label>
                      <input
                        type="text"
                        name="aadharNumber"
                        value={newConnectionData.aadharNumber}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        pattern="[0-9]{12}"
                        placeholder="12 рдЕрдВрдХреЛрдВ рдХрд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдИрдореЗрд▓
                      </label>
                      <input
                        type="email"
                        name="email"
                        value={newConnectionData.email}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                    </div>
                  </div>
                </div>

                <div className="bg-white border border-gray-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">рд╕рдВрдкрддреНрддрд┐ рдЬрд╛рдирдХрд╛рд░реА | Property Information</h3>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕рдВрдкрддреНрддрд┐ рдкреНрд░рдХрд╛рд░ *
                      </label>
                      <select
                        name="propertyType"
                        value={newConnectionData.propertyType}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="Residential">рдЖрд╡рд╛рд╕реАрдп / Residential</option>
                        <option value="Commercial">рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ / Commercial</option>
                        <option value="Industrial">рдФрджреНрдпреЛрдЧрд┐рдХ / Industrial</option>
                        <option value="Institutional">рд╕рдВрд╕реНрдерд╛рдЧрдд / Institutional</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдХрдиреЗрдХреНрд╢рди рдкреНрд░рдХрд╛рд░ *
                      </label>
                      <select
                        name="connectionType"
                        value={newConnectionData.connectionType}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="Domestic">рдШрд░реЗрд▓реВ / Domestic</option>
                        <option value="Non-Domestic">рдЧреИрд░-рдШрд░реЗрд▓реВ / Non-Domestic</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕рдВрдкрддреНрддрд┐ рдирдВрдмрд░
                      </label>
                      <input
                        type="text"
                        name="propertyNumber"
                        value={newConnectionData.propertyNumber}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдкреНрд▓реЙрдЯ рдирдВрдмрд░ *
                      </label>
                      <input
                        type="text"
                        name="plotNumber"
                        value={newConnectionData.plotNumber}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рд╕рджрд╕реНрдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛
                      </label>
                      <input
                        type="number"
                        name="noOfMembers"
                        value={newConnectionData.noOfMembers}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        min="1"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдкрд┐рди рдХреЛрдб *
                      </label>
                      <input
                        type="text"
                        name="pincode"
                        value={newConnectionData.pincode}
                        onChange={(e) => setNewConnectionData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        pattern="[0-9]{6}"
                      />
                    </div>
                  </div>
                  <div className="mt-6">
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      рдкреВрд░рд╛ рдкрддрд╛ *
                    </label>
                    <textarea
                      name="address"
                      value={newConnectionData.address}
                      onChange={(e) => setNewConnectionData(prev => ({
                        ...prev,
                        [e.target.name]: e.target.value
                      }))}
                      rows="3"
                      className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                      required
                      placeholder="рдкреВрд░рд╛ рдкрддрд╛ рд▓рд┐рдЦреЗрдВ"
                    />
                  </div>
                </div>

                <div className="flex flex-col md:flex-row gap-4">
                  <button
                    type="submit"
                    className="btn-primary flex-1"
                  >
                    рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░реЗрдВ | Submit Application
                  </button>
                  <button
                    type="button"
                    className="btn-secondary flex-1"
                    onClick={() => setNewConnectionData({
                      applicantName: '',
                      applicantNameMarathi: '',
                      fatherName: '',
                      contactNumber: '',
                      email: '',
                      aadharNumber: '',
                      propertyNumber: '',
                      plotNumber: '',
                      address: '',
                      pincode: '',
                      connectionType: '',
                      waterUsage: '',
                      propertyType: '',
                      noOfMembers: '',
                      existingConnection: 'no'
                    })}
                  >
                    рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ | Reset
                  </button>
                </div>
              </form>
            </div>
          )}

          {/* View Bills Tab */}
          {activeTab === 'viewBills' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рдмрд┐рд▓ рдЗрддрд┐рд╣рд╛рд╕ | Bill History</h2>
              
              <div className="space-y-4">
                {sampleBills.map((bill, index) => (
                  <div key={index} className="bg-white border border-gray-200 rounded-lg p-6">
                    <div className="flex flex-col md:flex-row md:items-center md:justify-between">
                      <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 md:mb-0">
                        <div>
                          <p className="text-sm text-gray-500">рдмрд┐рд▓ рдирдВрдмрд░</p>
                          <p className="font-medium">{bill.billNumber}</p>
                        </div>
                        <div>
                          <p className="text-sm text-gray-500">рдмрд┐рд▓ рджрд┐рдирд╛рдВрдХ</p>
                          <p className="font-medium">{bill.billDate}</p>
                        </div>
                        <div>
                          <p className="text-sm text-gray-500">рдЦрдкрдд (рд▓реАрдЯрд░)</p>
                          <p className="font-medium">{bill.consumption}</p>
                        </div>
                        <div>
                          <p className="text-sm text-gray-500">рд░рд╛рд╢рд┐</p>
                          <p className="font-medium text-lg">тВ╣{bill.amount}</p>
                        </div>
                      </div>
                      <div className="flex items-center gap-2">
                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                          bill.status === 'Paid' 
                            ? 'bg-green-100 text-green-800' 
                            : 'bg-red-100 text-red-800'
                        }`}>
                          {bill.status === 'Paid' ? 'рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛' : 'рдмрдХрд╛рдпрд╛'}
                        </span>
                        {bill.status === 'Pending' && (
                          <button
                            onClick={() => handlePayment(bill.amount)}
                            className="btn-primary text-sm"
                          >
                            рднреБрдЧрддрд╛рди рдХрд░реЗрдВ
                          </button>
                        )}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* Water Rates Tab */}
          {activeTab === 'rates' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рдЬрд▓ рджрд░реЗрдВ | Water Rates</h2>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-blue-800 mb-4">рдШрд░реЗрд▓реВ рджрд░реЗрдВ | Domestic Rates</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between">
                      <span>0-5000 рд▓реАрдЯрд░</span>
                      <span className="font-medium">тВ╣2 рдкреНрд░рддрд┐ 1000 рд▓реАрдЯрд░</span>
                    </div>
                    <div className="flex justify-between">
                      <span>5001-10000 рд▓реАрдЯрд░</span>
                      <span className="font-medium">тВ╣3 рдкреНрд░рддрд┐ 1000 рд▓реАрдЯрд░</span>
                    </div>
                    <div className="flex justify-between">
                      <span>10000+ рд▓реАрдЯрд░</span>
                      <span className="font-medium">тВ╣5 рдкреНрд░рддрд┐ 1000 рд▓реАрдЯрд░</span>
                    </div>
                    <hr className="my-3 border-blue-200" />
                    <div className="flex justify-between font-bold">
                      <span>рдиреНрдпреВрдирддрдо рд╢реБрд▓реНрдХ</span>
                      <span>тВ╣100 рдкреНрд░рддрд┐ рдорд╛рд╣</span>
                    </div>
                  </div>
                </div>

                <div className="bg-orange-50 border border-orange-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-orange-800 mb-4">рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рджрд░реЗрдВ | Commercial Rates</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between">
                      <span>0-3000 рд▓реАрдЯрд░</span>
                      <span className="font-medium">тВ╣5 рдкреНрд░рддрд┐ 1000 рд▓реАрдЯрд░</span>
                    </div>
                    <div className="flex justify-between">
                      <span>3001-6000 рд▓реАрдЯрд░</span>
                      <span className="font-medium">тВ╣7 рдкреНрд░рддрд┐ 1000 рд▓реАрдЯрд░</span>
                    </div>
                    <div className="flex justify-between">
                      <span>6000+ рд▓реАрдЯрд░</span>
                      <span className="font-medium">тВ╣10 рдкреНрд░рддрд┐ 1000 рд▓реАрдЯрд░</span>
                    </div>
                    <hr className="my-3 border-orange-200" />
                    <div className="flex justify-between font-bold">
                      <span>рдиреНрдпреВрдирддрдо рд╢реБрд▓реНрдХ</span>
                      <span>тВ╣300 рдкреНрд░рддрд┐ рдорд╛рд╣</span>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-gray-50 border border-gray-200 rounded-lg p-6">
                <h3 className="text-lg font-bold text-gray-800 mb-4">рдЕрдиреНрдп рд╢реБрд▓реНрдХ | Other Charges</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="space-y-2">
                    <div className="flex justify-between">
                      <span>рдирдпрд╛ рдХрдиреЗрдХреНрд╢рди рд╢реБрд▓реНрдХ (рдШрд░реЗрд▓реВ)</span>
                      <span className="font-medium">тВ╣500</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдирдпрд╛ рдХрдиреЗрдХреНрд╢рди рд╢реБрд▓реНрдХ (рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ)</span>
                      <span className="font-medium">тВ╣1,000</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдореАрдЯрд░ рдЬрдорд╛ рд░рд╛рд╢рд┐</span>
                      <span className="font-medium">тВ╣1,500</span>
                    </div>
                  </div>
                  <div className="space-y-2">
                    <div className="flex justify-between">
                      <span>рджреЗрд░ рд╕реЗ рднреБрдЧрддрд╛рди рдЬреБрд░реНрдорд╛рдирд╛</span>
                      <span className="font-medium">2% рдкреНрд░рддрд┐ рдорд╛рд╣</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдХрдиреЗрдХреНрд╢рди рдмрдВрдж рдХрд░рдиреЗ рдХрд╛ рд╢реБрд▓реНрдХ</span>
                      <span className="font-medium">тВ╣100</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдмрд┐рд▓ рд╢реБрд▓реНрдХ</span>
                      <span className="font-medium">тВ╣50</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}