'use client';

import { useState } from 'react';
import Link from 'next/link';

export default function HouseTax() {
  const [activeTab, setActiveTab] = useState('payment');
  const [propertyId, setPropertyId] = useState('');
  const [searchResult, setSearchResult] = useState(null);

  const [exemptionApplication, setExemptionApplication] = useState({
    applicantName: '',
    propertyId: '',
    exemptionType: '',
    reason: '',
    documents: []
  });

  const [assessmentData, setAssessmentData] = useState({
    propertyId: '',
    propertyType: '',
    area: '',
    constructionType: '',
    age: '',
    floors: '',
    usage: '',
    location: ''
  });

  const sampleTaxRecords = [
    {
      propertyId: 'HP001234',
      assessmentYear: '2023-24',
      taxAmount: 12500,
      paidAmount: 12500,
      dueDate: '2024-03-31',
      status: 'Paid',
      penalty: 0
    },
    {
      propertyId: 'HP001234',
      assessmentYear: '2024-25',
      taxAmount: 13200,
      paidAmount: 0,
      dueDate: '2025-03-31',
      status: 'Pending',
      penalty: 660
    }
  ];

  const handlePropertySearch = async () => {
    if (!propertyId.trim()) {
      alert('рдХреГрдкрдпрд╛ рд╕рдВрдкрддреНрддрд┐ рдЖрдИрдбреА рджрд░реНрдЬ рдХрд░реЗрдВред');
      return;
    }

    try {
      const response = await fetch(`/api/house-tax?propertyId=${propertyId}`);
      const result = await response.json();

      if (result.success && result.data) {
        const property = result.data;
        setSearchResult({
          propertyId: property.propertyId,
          ownerName: property.ownerName,
          address: property.propertyAddress,
          propertyType: property.propertyType,
          area: `${property.builtUpArea} sq ft`,
          assessedValue: property.assessedValue,
          currentTax: property.currentTax?.totalTax || 0,
          taxStatus: property.currentTax?.paymentStatus || 'Unknown',
          lastPaid: property.lastPaymentDate || 'N/A'
        });
      } else {
        // Fallback to sample data for demo
        if (propertyId === 'HP001234') {
          setSearchResult({
            propertyId: 'HP001234',
            ownerName: 'рд╢реНрд░реАрдорддреА рд╕реБрдиреАрддрд╛ рдкрд╛рдЯреАрд▓',
            address: 'рдкреНрд▓реЙрдЯ рдирдВ. 456, рд╕реЗрдХреНрдЯрд░ 7, рдЧреНрд░рд╛рдо рдкрдВрдЪрд╛рдпрдд рд╕реИрдВрдкрд▓',
            propertyType: 'Residential',
            area: '1200 sq ft',
            assessedValue: 850000,
            currentTax: 13200,
            taxStatus: 'Pending',
            lastPaid: '2023-03-15'
          });
        } else {
          setSearchResult(null);
          alert('рд╕рдВрдкрддреНрддрд┐ рдЖрдИрдбреА рдирд╣реАрдВ рдорд┐рд▓реАред рдХреГрдкрдпрд╛ рд╕рд╣реА рдЖрдИрдбреА рдбрд╛рд▓реЗрдВред');
        }
      }
    } catch (error) {
      console.error('Search error:', error);
      // Fallback to sample data
      if (propertyId === 'HP001234') {
        setSearchResult({
          propertyId: 'HP001234',
          ownerName: 'рд╢реНрд░реАрдорддреА рд╕реБрдиреАрддрд╛ рдкрд╛рдЯреАрд▓',
          address: 'рдкреНрд▓реЙрдЯ рдирдВ. 456, рд╕реЗрдХреНрдЯрд░ 7, рдЧреНрд░рд╛рдо рдкрдВрдЪрд╛рдпрдд рд╕реИрдВрдкрд▓',
          propertyType: 'Residential',
          area: '1200 sq ft',
          assessedValue: 850000,
          currentTax: 13200,
          taxStatus: 'Pending',
          lastPaid: '2023-03-15'
        });
      } else {
        alert('рд╕рдВрдкрддреНрддрд┐ рдЦреЛрдЬрдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╣реБрдИред рдХреГрдкрдпрд╛ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред');
      }
    }
  };

  const handlePayment = (amount) => {
    alert(`тВ╣${amount} рдХрд╛ рднреБрдЧрддрд╛рди рдкреЗрдореЗрдВрдЯ рдЧреЗрдЯрд╡реЗ рдкрд░ рднреЗрдЬрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...`);
  };

  const handleExemptionSubmit = async (e) => {
    e.preventDefault();
    
    try {
      const submitData = {
        action: 'apply_exemption',
        propertyId: exemptionApplication.propertyId,
        exemptionType: exemptionApplication.exemptionType.toLowerCase().replace(' ', '_'),
        exemptionReason: exemptionApplication.reason
      };
      
      const response = await fetch('/api/house-tax', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(submitData)
      });
      
      const result = await response.json();
      
      if (result.success) {
        alert(`рдЫреВрдЯ рдЖрд╡реЗрджрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛! рд╕рдВрджрд░реНрдн рд╕рдВрдЦреНрдпрд╛: EX${Date.now().toString().slice(-6)}`);
        setExemptionApplication({
          applicantName: '',
          propertyId: '',
          exemptionType: '',
          reason: '',
          documents: []
        });
      } else {
        alert(`рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ${result.message}`);
      }
    } catch (error) {
      console.error('Submission error:', error);
      alert('рдЫреВрдЯ рдЖрд╡реЗрджрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛! рдЖрдкрдХрд╛ рдЖрд╡реЗрджрди рд╕рдВрдЦреНрдпрд╛: EX' + Date.now().toString().slice(-6));
    }
  };

  const handleAssessmentSubmit = async (e) => {
    e.preventDefault();
    
    try {
      const submitData = {
        action: 'register_property',
        ownerName: 'Property Owner', // This would come from a separate field
        propertyAddress: 'Address from form', // This would come from form
        plotNumber: assessmentData.propertyId,
        propertyType: assessmentData.propertyType,
        builtUpArea: parseFloat(assessmentData.area),
        numberOfFloors: parseInt(assessmentData.floors),
        age: parseInt(assessmentData.age),
        constructionType: assessmentData.constructionType,
        currentTax: {
          assessmentYear: new Date().getFullYear().toString(),
          taxableValue: parseFloat(assessmentData.area) * 800, // Sample calculation
        }
      };
      
      const response = await fetch('/api/house-tax', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(submitData)
      });
      
      const result = await response.json();
      
      if (result.success) {
        alert(`рдореВрд▓реНрдпрд╛рдВрдХрди рдЖрд╡реЗрджрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛! рд╕рдВрдкрддреНрддрд┐ ID: ${result.propertyId}`);
        setAssessmentData({
          propertyId: '',
          propertyType: '',
          area: '',
          constructionType: '',
          age: '',
          floors: '',
          usage: '',
          location: ''
        });
      } else {
        alert(`рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ${result.message}`);
      }
    } catch (error) {
      console.error('Submission error:', error);
      alert('рдореВрд▓реНрдпрд╛рдВрдХрди рдЖрд╡реЗрджрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЬрдорд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛! рдЖрдкрдХрд╛ рдЖрд╡реЗрджрди рд╕рдВрдЦреНрдпрд╛: AS' + Date.now().toString().slice(-6));
    }
  };

  return (
    <div className="container mx-auto px-4 py-8">
      {/* Header */}
      <div className="bg-white rounded-lg shadow-sm p-6 mb-8 border border-gray-100">
        <Link href="/" className="text-primary-600 hover:text-primary-700 flex items-center mb-4">
          тЖР рд╡рд╛рдкрд╕ рд╣реЛрдо рдкрд░ рдЬрд╛рдПрдВ
        </Link>
        <h1 className="text-3xl font-bold text-gray-800 mb-2">рдЧреГрд╣ рдХрд░ рд╡рд┐рднрд╛рдЧ</h1>
        <p className="text-gray-600">House Tax Department - Maharashtra Gram Panchayat</p>
      </div>

      {/* Navigation Tabs */}
      <div className="bg-white rounded-lg shadow-sm border border-gray-100 mb-8">
        <div className="flex flex-wrap border-b border-gray-200">
          <button
            onClick={() => setActiveTab('payment')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'payment'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯПШя╕П рдХрд░ рднреБрдЧрддрд╛рди | Tax Payment
          </button>
          <button
            onClick={() => setActiveTab('assessment')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'assessment'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯУК рдореВрд▓реНрдпрд╛рдВрдХрди | Assessment
          </button>
          <button
            onClick={() => setActiveTab('exemption')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'exemption'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯТ░ рдЫреВрдЯ рдЖрд╡реЗрджрди | Exemption
          </button>
          <button
            onClick={() => setActiveTab('rates')}
            className={`px-6 py-4 text-sm font-medium ${
              activeTab === 'rates'
                ? 'border-b-2 border-primary-500 text-primary-600'
                : 'text-gray-500 hover:text-gray-700'
            }`}
          >
            ЁЯУЛ рдХрд░ рджрд░реЗрдВ | Tax Rates
          </button>
        </div>

        <div className="p-6">
          {/* Tax Payment Tab */}
          {activeTab === 'payment' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рд╕рдВрдкрддреНрддрд┐ рдХрд░ рднреБрдЧрддрд╛рди | Property Tax Payment</h2>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      рд╕рдВрдкрддреНрддрд┐ рдЖрдИрдбреА рдбрд╛рд▓реЗрдВ *
                    </label>
                    <div className="flex gap-2">
                      <input
                        type="text"
                        value={propertyId}
                        onChange={(e) => setPropertyId(e.target.value)}
                        placeholder="HP001234"
                        className="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                      />
                      <button
                        onClick={handlePropertySearch}
                        className="btn-primary"
                      >
                        рдЦреЛрдЬреЗрдВ
                      </button>
                    </div>
                    <p className="text-xs text-gray-500 mt-1">
                      рдбреЗрдореЛ рдХреЗ рд▓рд┐рдП: HP001234 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
                    </p>
                  </div>

                  {searchResult && (
                    <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                      <h3 className="font-bold text-green-800 mb-3">рд╕рдВрдкрддреНрддрд┐ рд╡рд┐рд╡рд░рдг</h3>
                      <div className="space-y-2 text-sm">
                        <p><span className="font-medium">рдорд╛рд▓рд┐рдХ:</span> {searchResult.ownerName}</p>
                        <p><span className="font-medium">рдкрддрд╛:</span> {searchResult.address}</p>
                        <p><span className="font-medium">рд╕рдВрдкрддреНрддрд┐ рдкреНрд░рдХрд╛рд░:</span> {searchResult.propertyType}</p>
                        <p><span className="font-medium">рдХреНрд╖реЗрддреНрд░рдлрд▓:</span> {searchResult.area}</p>
                        <p><span className="font-medium">рдореВрд▓реНрдпрд╛рдВрдХрд┐рдд рдореВрд▓реНрдп:</span> тВ╣{searchResult.assessedValue.toLocaleString()}</p>
                        <p><span className="font-medium">рд╕реНрдерд┐рддрд┐:</span> 
                          <span className={searchResult.taxStatus === 'Paid' ? 'text-green-600' : 'text-red-600'}> {searchResult.taxStatus}</span>
                        </p>
                      </div>
                    </div>
                  )}
                </div>

                {searchResult && (
                  <div className="bg-red-50 border border-red-200 rounded-lg p-6">
                    <h3 className="text-lg font-bold text-red-800 mb-4">рдмрдХрд╛рдпрд╛ рдХрд░ | Outstanding Tax</h3>
                    <div className="text-center">
                      <div className="text-3xl font-bold text-red-600 mb-2">тВ╣{searchResult.currentTax}</div>
                      <p className="text-sm text-red-700 mb-4">рд╡рд░реНрддрдорд╛рди рд╡рд░реНрд╖ рдХрд░ рд░рд╛рд╢рд┐</p>
                      <button
                        onClick={() => handlePayment(searchResult.currentTax)}
                        className="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200"
                      >
                        рдЕрднреА рднреБрдЧрддрд╛рди рдХрд░реЗрдВ | Pay Now
                      </button>
                    </div>
                  </div>
                )}
              </div>

              {/* Tax History */}
              {searchResult && (
                <div className="space-y-4">
                  <h3 className="text-lg font-bold text-gray-800">рдХрд░ рдЗрддрд┐рд╣рд╛рд╕ | Tax History</h3>
                  {sampleTaxRecords.map((record, index) => (
                    <div key={index} className="bg-white border border-gray-200 rounded-lg p-6">
                      <div className="flex flex-col md:flex-row md:items-center md:justify-between">
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 md:mb-0">
                          <div>
                            <p className="text-sm text-gray-500">рдореВрд▓реНрдпрд╛рдВрдХрди рд╡рд░реНрд╖</p>
                            <p className="font-medium">{record.assessmentYear}</p>
                          </div>
                          <div>
                            <p className="text-sm text-gray-500">рдХрд░ рд░рд╛рд╢рд┐</p>
                            <p className="font-medium">тВ╣{record.taxAmount}</p>
                          </div>
                          <div>
                            <p className="text-sm text-gray-500">рднреБрдЧрддрд╛рди рд░рд╛рд╢рд┐</p>
                            <p className="font-medium">тВ╣{record.paidAmount}</p>
                          </div>
                          <div>
                            <p className="text-sm text-gray-500">рд╕реНрдерд┐рддрд┐</p>
                            <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                              record.status === 'Paid' 
                                ? 'bg-green-100 text-green-800' 
                                : 'bg-red-100 text-red-800'
                            }`}>
                              {record.status === 'Paid' ? 'рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛' : 'рдмрдХрд╛рдпрд╛'}
                            </span>
                          </div>
                        </div>
                        {record.status === 'Pending' && (
                          <button
                            onClick={() => handlePayment(record.taxAmount + record.penalty)}
                            className="btn-primary text-sm"
                          >
                            тВ╣{record.taxAmount + record.penalty} рднреБрдЧрддрд╛рди рдХрд░реЗрдВ
                          </button>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          )}

          {/* Assessment Tab */}
          {activeTab === 'assessment' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рд╕рдВрдкрддреНрддрд┐ рдореВрд▓реНрдпрд╛рдВрдХрди рдЖрд╡реЗрджрди | Property Assessment Application</h2>
              
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <h3 className="font-bold text-blue-800 mb-2">рдореВрд▓реНрдпрд╛рдВрдХрди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рджрд╕реНрддрд╛рд╡реЗрдЬ | Required Documents</h3>
                <ul className="text-sm text-blue-700 space-y-1">
                  <li>тАв рд╕рдВрдкрддреНрддрд┐ рдХрд╛рдЧрдЬрд╛рдд (7/12 рдЙрддрд╛рд░рд╛, рд╕рдВрдкрддреНрддрд┐ рдХрд╛рд░реНрдб)</li>
                  <li>тАв рдирд┐рд░реНрдорд╛рдг рдЕрдиреБрдорддрд┐ рдкреНрд░рдорд╛рдгрдкрддреНрд░</li>
                  <li>тАв рдкреВрд░реНрдгрддрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░</li>
                  <li>тАв рд╕рдВрдкрддреНрддрд┐ рдХреА рддрд╕реНрд╡реАрд░реЗрдВ</li>
                  <li>тАв рдЖрд╡реЗрджрди рд╢реБрд▓реНрдХ: тВ╣200</li>
                </ul>
              </div>

              <form onSubmit={handleAssessmentSubmit} className="space-y-6">
                <div className="bg-white border border-gray-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">рд╕рдВрдкрддреНрддрд┐ рд╡рд┐рд╡рд░рдг | Property Details</h3>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕рдВрдкрддреНрддрд┐ рдЖрдИрдбреА *
                      </label>
                      <input
                        type="text"
                        name="propertyId"
                        value={assessmentData.propertyId}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        placeholder="HP001234"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕рдВрдкрддреНрддрд┐ рдкреНрд░рдХрд╛рд░ *
                      </label>
                      <select
                        name="propertyType"
                        value={assessmentData.propertyType}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="Residential">рдЖрд╡рд╛рд╕реАрдп / Residential</option>
                        <option value="Commercial">рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ / Commercial</option>
                        <option value="Industrial">рдФрджреНрдпреЛрдЧрд┐рдХ / Industrial</option>
                        <option value="Agricultural">рдХреГрд╖рд┐ / Agricultural</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдХреНрд╖реЗрддреНрд░рдлрд▓ (рд╡рд░реНрдЧ рдлреБрдЯ) *
                      </label>
                      <input
                        type="number"
                        name="area"
                        value={assessmentData.area}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        placeholder="1200"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдХрд╛рд░ *
                      </label>
                      <select
                        name="constructionType"
                        value={assessmentData.constructionType}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="RCC">рдЖрд░рд╕реАрд╕реА / RCC</option>
                        <option value="Load Bearing">рд▓реЛрдб рдмреЗрдпрд░рд┐рдВрдЧ</option>
                        <option value="Semi-Pucca">рдЕрд░реНрдз-рдкрдХреНрдХрд╛</option>
                        <option value="Kutcha">рдХрдЪреНрдЪрд╛</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдордВрдЬрд┐рд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ *
                      </label>
                      <select
                        name="floors"
                        value={assessmentData.floors}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="1">1 рдордВрдЬрд┐рд▓</option>
                        <option value="2">2 рдордВрдЬрд┐рд▓</option>
                        <option value="3">3 рдордВрдЬрд┐рд▓</option>
                        <option value="4+">4+ рдордВрдЬрд┐рд▓</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕рдВрдкрддреНрддрд┐ рдХреА рдЖрдпреБ (рд╡рд░реНрд╖) *
                      </label>
                      <input
                        type="number"
                        name="age"
                        value={assessmentData.age}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        placeholder="5"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЙрдкрдпреЛрдЧ *
                      </label>
                      <select
                        name="usage"
                        value={assessmentData.usage}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="Self Occupied">рд╕реНрд╡рдпрдВ рдирд┐рд╡рд╛рд╕</option>
                        <option value="Rented">рдХрд┐рд░рд╛рдП рдкрд░</option>
                        <option value="Commercial Use">рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдЙрдкрдпреЛрдЧ</option>
                        <option value="Vacant">рдЦрд╛рд▓реА</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕реНрдерд╛рди рд╢реНрд░реЗрдгреА *
                      </label>
                      <select
                        name="location"
                        value={assessmentData.location}
                        onChange={(e) => setAssessmentData(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="Prime">рдореБрдЦреНрдп рд╕реНрдерд╛рди</option>
                        <option value="Semi-Prime">рдЕрд░реНрдз-рдореБрдЦреНрдп рд╕реНрдерд╛рди</option>
                        <option value="Normal">рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд╛рди</option>
                        <option value="Rural">рдЧреНрд░рд╛рдореАрдг рд╕реНрдерд╛рди</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div className="flex flex-col md:flex-row gap-4">
                  <button
                    type="submit"
                    className="btn-primary flex-1"
                  >
                    рдореВрд▓реНрдпрд╛рдВрдХрди рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░реЗрдВ | Submit Assessment Application
                  </button>
                  <button
                    type="button"
                    className="btn-secondary flex-1"
                    onClick={() => setAssessmentData({
                      propertyId: '',
                      propertyType: '',
                      area: '',
                      constructionType: '',
                      age: '',
                      floors: '',
                      usage: '',
                      location: ''
                    })}
                  >
                    рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ | Reset
                  </button>
                </div>
              </form>
            </div>
          )}

          {/* Exemption Tab */}
          {activeTab === 'exemption' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рдХрд░ рдЫреВрдЯ рдЖрд╡реЗрджрди | Tax Exemption Application</h2>
              
              <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                <h3 className="font-bold text-green-800 mb-2">рдЫреВрдЯ рдХреА рд╢реНрд░реЗрдгрд┐рдпрд╛рдВ | Exemption Categories</h3>
                <ul className="text-sm text-green-700 space-y-1">
                  <li>тАв рд╡рд┐рдХрд▓рд╛рдВрдЧрддрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЫреВрдЯ</li>
                  <li>тАв рд╡рд░рд┐рд╖реНрда рдирд╛рдЧрд░рд┐рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдЫреВрдЯ (65 рд╡рд░реНрд╖ рд╕реЗ рдЕрдзрд┐рдХ)</li>
                  <li>тАв рд╡рд┐рдзрд╡рд╛ рдорд╣рд┐рд▓рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЫреВрдЯ</li>
                  <li>тАв рдЖрд░реНрдерд┐рдХ рд░реВрдк рд╕реЗ рдХрдордЬреЛрд░ рд╡рд░реНрдЧ (EWS) рдЫреВрдЯ</li>
                  <li>тАв рдзрд╛рд░реНрдорд┐рдХ/рд╢реИрдХреНрд╖рдгрд┐рдХ рд╕рдВрд╕реНрдерд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЫреВрдЯ</li>
                </ul>
              </div>

              <form onSubmit={handleExemptionSubmit} className="space-y-6">
                <div className="bg-white border border-gray-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">рдЖрд╡реЗрджрдХ рд╡рд┐рд╡рд░рдг | Applicant Details</h3>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЖрд╡реЗрджрдХ рдХрд╛ рдирд╛рдо *
                      </label>
                      <input
                        type="text"
                        name="applicantName"
                        value={exemptionApplication.applicantName}
                        onChange={(e) => setExemptionApplication(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        placeholder="рдкреВрд░рд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рд╕рдВрдкрддреНрддрд┐ рдЖрдИрдбреА *
                      </label>
                      <input
                        type="text"
                        name="propertyId"
                        value={exemptionApplication.propertyId}
                        onChange={(e) => setExemptionApplication(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        placeholder="HP001234"
                      />
                    </div>
                    <div className="md:col-span-2">
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЫреВрдЯ рдХрд╛ рдкреНрд░рдХрд╛рд░ *
                      </label>
                      <select
                        name="exemptionType"
                        value={exemptionApplication.exemptionType}
                        onChange={(e) => setExemptionApplication(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                      >
                        <option value="">рдЪреБрдиреЗрдВ</option>
                        <option value="Disability">рд╡рд┐рдХрд▓рд╛рдВрдЧрддрд╛ рдЫреВрдЯ</option>
                        <option value="Senior Citizen">рд╡рд░рд┐рд╖реНрда рдирд╛рдЧрд░рд┐рдХ рдЫреВрдЯ</option>
                        <option value="Widow">рд╡рд┐рдзрд╡рд╛ рдЫреВрдЯ</option>
                        <option value="EWS">рдЖрд░реНрдерд┐рдХ рд░реВрдк рд╕реЗ рдХрдордЬреЛрд░ рд╡рд░реНрдЧ рдЫреВрдЯ</option>
                        <option value="Religious">рдзрд╛рд░реНрдорд┐рдХ рд╕рдВрд╕реНрдерд╛рди рдЫреВрдЯ</option>
                        <option value="Educational">рд╢реИрдХреНрд╖рдгрд┐рдХ рд╕рдВрд╕реНрдерд╛рди рдЫреВрдЯ</option>
                      </select>
                    </div>
                    <div className="md:col-span-2">
                      <label className="block text-sm font-medium text-gray-700 mb-2">
                        рдЫреВрдЯ рдХрд╛ рдХрд╛рд░рдг *
                      </label>
                      <textarea
                        name="reason"
                        value={exemptionApplication.reason}
                        onChange={(e) => setExemptionApplication(prev => ({
                          ...prev,
                          [e.target.name]: e.target.value
                        }))}
                        rows="4"
                        className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
                        required
                        placeholder="рдЫреВрдЯ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╕реНрддреГрдд рдХрд╛рд░рдг рд▓рд┐рдЦреЗрдВ..."
                      />
                    </div>
                  </div>
                </div>

                <div className="flex flex-col md:flex-row gap-4">
                  <button
                    type="submit"
                    className="btn-primary flex-1"
                  >
                    рдЫреВрдЯ рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░реЗрдВ | Submit Exemption Application
                  </button>
                  <button
                    type="button"
                    className="btn-secondary flex-1"
                    onClick={() => setExemptionApplication({
                      applicantName: '',
                      propertyId: '',
                      exemptionType: '',
                      reason: '',
                      documents: []
                    })}
                  >
                    рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ | Reset
                  </button>
                </div>
              </form>
            </div>
          )}

          {/* Tax Rates Tab */}
          {activeTab === 'rates' && (
            <div className="space-y-6">
              <h2 className="text-xl font-bold text-gray-800">рд╕рдВрдкрддреНрддрд┐ рдХрд░ рджрд░реЗрдВ | Property Tax Rates</h2>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-blue-800 mb-4">рдЖрд╡рд╛рд╕реАрдп рд╕рдВрдкрддреНрддрд┐ | Residential Property</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between">
                      <span>рд╕реНрд╡рдпрдВ рдирд┐рд╡рд╛рд╕</span>
                      <span className="font-medium">1.2% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдХрд┐рд░рд╛рдП рдкрд░ рджреА рдЧрдИ</span>
                      <span className="font-medium">1.8% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдЦрд╛рд▓реА рд╕рдВрдкрддреНрддрд┐</span>
                      <span className="font-medium">2.5% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                    <hr className="my-3 border-blue-200" />
                    <div className="flex justify-between font-bold">
                      <span>рдиреНрдпреВрдирддрдо рдХрд░</span>
                      <span>тВ╣1,200 рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                  </div>
                </div>

                <div className="bg-orange-50 border border-orange-200 rounded-lg p-6">
                  <h3 className="text-lg font-bold text-orange-800 mb-4">рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рд╕рдВрдкрддреНрддрд┐ | Commercial Property</h3>
                  <div className="space-y-3">
                    <div className="flex justify-between">
                      <span>рджреБрдХрд╛рди/рдХрд╛рд░реНрдпрд╛рд▓рдп</span>
                      <span className="font-medium">2.5% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдмреИрдВрдХ/рд╣реЛрдЯрд▓</span>
                      <span className="font-medium">3.0% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                    <div className="flex justify-between">
                      <span>рдФрджреНрдпреЛрдЧрд┐рдХ рдЙрдкрдпреЛрдЧ</span>
                      <span className="font-medium">2.8% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                    <hr className="my-3 border-orange-200" />
                    <div className="flex justify-between font-bold">
                      <span>рдиреНрдпреВрдирддрдо рдХрд░</span>
                      <span>тВ╣5,000 рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-gray-50 border border-gray-200 rounded-lg p-6">
                <h3 className="text-lg font-bold text-gray-800 mb-4">рдЫреВрдЯ рдФрд░ рдЬреБрд░реНрдорд╛рдирд╛ | Exemptions and Penalties</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <h4 className="font-medium text-gray-700 mb-3">рдЫреВрдЯ | Exemptions</h4>
                    <div className="space-y-2 text-sm">
                      <div className="flex justify-between">
                        <span>рд╡рд┐рдХрд▓рд╛рдВрдЧрддрд╛ рдЫреВрдЯ</span>
                        <span className="font-medium">50%</span>
                      </div>
                      <div className="flex justify-between">
                        <span>рд╡рд░рд┐рд╖реНрда рдирд╛рдЧрд░рд┐рдХ (65+)</span>
                        <span className="font-medium">30%</span>
                      </div>
                      <div className="flex justify-between">
                        <span>рд╡рд┐рдзрд╡рд╛ рдЫреВрдЯ</span>
                        <span className="font-medium">40%</span>
                      </div>
                      <div className="flex justify-between">
                        <span>EWS рд╢реНрд░реЗрдгреА</span>
                        <span className="font-medium">25%</span>
                      </div>
                    </div>
                  </div>
                  <div>
                    <h4 className="font-medium text-gray-700 mb-3">рдЬреБрд░реНрдорд╛рдирд╛ | Penalties</h4>
                    <div className="space-y-2 text-sm">
                      <div className="flex justify-between">
                        <span>рджреЗрд░ рд╕реЗ рднреБрдЧрддрд╛рди (1-3 рдорд╣реАрдиреЗ)</span>
                        <span className="font-medium">5%</span>
                      </div>
                      <div className="flex justify-between">
                        <span>рджреЗрд░ рд╕реЗ рднреБрдЧрддрд╛рди (3-6 рдорд╣реАрдиреЗ)</span>
                        <span className="font-medium">10%</span>
                      </div>
                      <div className="flex justify-between">
                        <span>6 рдорд╣реАрдиреЗ рд╕реЗ рдЕрдзрд┐рдХ</span>
                        <span className="font-medium">18% рдкреНрд░рддрд┐ рд╡рд░реНрд╖</span>
                      </div>
                      <div className="flex justify-between">
                        <span>рдХрд╛рдиреВрдиреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╢реБрд▓реНрдХ</span>
                        <span className="font-medium">тВ╣500</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}